<div class="min-h-screen pt-8 pb-24 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
  <app-ui-container customClass="p-8 mb-8">
    <h1 class="text-3xl font-bold text-white mb-2">Category Templates</h1>
    <p class="text-gray-400 mb-6">Manage product specifications templates for project creators.</p>

    <!-- Create Form -->
    <div class="border border-white/10 rounded-lg p-6 bg-white/5">
      <h2 class="text-xl font-semibold text-white mb-4">Create New Template</h2>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-300 mb-2">Category Name</label>
          <input
            formControlName="name"
            class="block w-full rounded-lg border border-white/10 bg-black/20 py-2 px-3 text-white placeholder-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
            type="text"
            placeholder="e.g. Mechanical Keyboard"
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-300 mb-2">Default Specifications</label>
          <div formArrayName="specs" class="space-y-2">
            @for (spec of specs.controls; track index; let index = $index) {
              <div class="flex gap-2">
                <input
                  [formControlName]="index"
                  class="block w-full rounded-lg border border-white/10 bg-black/20 py-2 px-3 text-white placeholder-gray-500 focus:border-blue-500"
                  type="text"
                  placeholder="Spec Name (e.g. Case Color)"
                />
                <app-ui-btn
                  variant="ghost"
                  type="button"
                  (click)="removeSpec(index)"
                  customClass="!text-red-400 hover:!text-red-300"
                >
                  <span class="material-icons text-sm">close</span>
                </app-ui-btn>
              </div>
            }
          </div>
          <app-ui-btn
            variant="secondary"
            size="sm"
            type="button"
            (click)="addSpec()"
            customClass="mt-2 text-xs"
          >
            <span class="material-icons text-sm mr-1">add</span> Add Spec
          </app-ui-btn>
        </div>

        <div class="pt-4 flex justify-end">
          <app-ui-btn
            variant="primary"
            type="submit"
            [disabled]="form.invalid || isLoading()"
            [loading]="isLoading()"
          >
            Create Template
          </app-ui-btn>
        </div>
      </form>
    </div>
  </app-ui-container>

  <!-- List -->
  <app-ui-container customClass="p-8">
    <h2 class="text-xl font-semibold text-white mb-4">Existing Templates</h2>

    @if (categories().length === 0) {
      <div class="text-gray-500 text-center py-8">No templates found. Create one above.</div>
    } @else {
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        @for (cat of categories(); track cat.id) {
          <div
            class="rounded-lg border border-white/10 bg-white/5 p-4 hover:border-white/20 transition-colors"
          >
            <div class="font-bold text-white text-lg mb-1">{{ cat.name }}</div>
            <div class="text-sm text-gray-400">
              <span class="uppercase text-xs font-semibold text-gray-500 tracking-wider"
                >Specs:</span
              >
              <div class="flex flex-wrap gap-1 mt-1">
                @if (cat.specNames.length === 0) {
                  <span class="italic text-gray-600">No specs</span>
                } @else {
                  @for (spec of cat.specNames; track spec) {
                    <span
                      class="inline-flex items-center rounded-md bg-blue-500/10 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-500/20"
                      >{{ spec }}</span
                    >
                  }
                }
              </div>
            </div>
          </div>
        }
      </div>
    }
  </app-ui-container>
</div>
